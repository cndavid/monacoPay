<?php/** *  +---------------------------------------------------------------------- *  |  [ WE CAN DO IT JUST THINK ] *  +---------------------------------------------------------------------- *  | Copyright (c) 2018 http://www.monapay.com All rights reserved. *  +---------------------------------------------------------------------- *  | Licensed ( https://www.apache.org/licenses/LICENSE-2.0 ) *  +---------------------------------------------------------------------- *  |  *  +---------------------------------------------------------------------- */namespace app\index\controller;use app\common\library\enum\OrderStatusEnum;class Order extends Base{    /**     * 商户交易订单     *     *      *     * @return mixed     */    public function index(){        $where = ['uid' => is_login()];        //组合搜索        !empty($this->request->get('trade_no')) && $where['trade_no']            = ['like', '%'.$this->request->get('trade_no').'%'];        !empty($this->request->get('channel')) && $where['channel']            = ['eq', $this->request->get('channel')];        //时间搜索  时间戳搜素        $where['create_time'] = $this->parseRequestDate();        //状态        $where['status'] = ['eq', $this->request->get('status',OrderStatusEnum::UNPAID)];        $this->assign('list', $this->logicOrders->getOrderList($where,true, 'create_time desc', 10));        $this->assign('code',$this->logicPay->getCodeList([]));        return $this->fetch();    }    /**     * 商户退款订单     *     *      *     * @return mixed     */    public function refund(){        $where = ['uid' => is_login()];        //组合搜索        !empty($this->request->get('trade_no')) && $where['trade_no']            = ['like', '%'.$this->request->get('trade_no').'%'];        !empty($this->request->get('channel')) && $where['channel']            = ['eq', $this->request->get('channel')];        //时间搜索  时间戳搜素        $where['create_time'] = $this->parseRequestDate();        //状态        $where['status'] = ['eq', $this->request->get('status',OrderStatusEnum::UNPAID)];        //halt($this->logicOrders->getOrderList($where,true, 'create_time desc', 10));        $this->assign('list', $this->logicOrders->getOrderList($where,true, 'create_time desc', 10));        return $this->fetch();    }    /**     *     *      *     * @return mixed     */    public function submit(){        $where = ['uid' => is_login()];        $this->assign('list', $this->logicOrders->getOrderList($where,true, 'create_time desc', 10));        return $this->fetch();    }}