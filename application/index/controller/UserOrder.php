<?phpnamespace app\index\controller;use app\common\controller\Common;use app\common\library\enum\OrderStatusEnum;use app\common\logic\Orders;class UserOrder extends Common{    public function index(){        return 'index';    }    /**     * 学员收款交易订单     * @return mixed     */    public function list(){        $where = ['qrcode_username' => $this->request->get('username')];        //组合搜索        !empty($this->request->get('trade_no')) && $where['trade_no']            = ['like', '%'.$this->request->get('trade_no').'%'];        !empty($this->request->get('channel')) && $where['channel']            = ['eq', $this->request->get('channel')];        //时间搜索  时间戳搜素//        $where['create_time'] = $this->parseRequestDate();        //状态        $where['status'] = ['eq', $this->request->get('status',OrderStatusEnum::UNPAID)];        $list = $this->logicOrders->getOrderList($where,true, 'create_time desc', 10)->toArray();        foreach ($list['data'] as $k =>$v){            $str = '<tr>                      <td class="check hidden-xs">                        <label><input name="optionsRadios1" type="checkbox" value="option1"><span></span></label>                      </td>                      <td>                        '.date('Y-m-d H:i', $v['create_time']). '                      </td>                      <td>                        ￥'.$v['amount'].'                      </td>                      <td class="actions">                        <div class="action-buttons">                          <a class="table-actions done" onclick="done('.$v['id'].')" href="javascript:void(0)" id="'.$v['id'].'">确认到账</a>                        </div>                      </td>                    </tr>';            $list['data'][$k] = $str;        }        $code = $this->logicPay->getCodeList([])->toArray();        return json_encode($list);    }    /**     * 标记订单完成     */    public function done_order(){        $order_id =  $this->request->get('id');        $orders = new Orders();        return $orders->update(['status'=>2],['id'=>$order_id]);    }    public function submit(){        $where = ['uid' => is_login()];        $this->assign('list', $this->logicOrders->getOrderList($where,true, 'create_time desc', 10));        return $this->fetch();    }}